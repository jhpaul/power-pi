from flask import Flask
from flask import request, redirect, url_for
import light
app = Flask(__name__)

@app.route('/')
def hello_world():
    light.toggle()
    return "Light Toggle"


@app.route('/light', methods=['GET', 'PUT', 'POST'])
def lights():
    if request.method in ('PUT', 'POST'):
        light.toggle()
        return "Light Toggled \n" + light.status() +"\n"
    else:
        return light.status() + "\n"

@app.route ('/light/toggle', methods=['GET','PUT','POST'])
def toggle():
	if request.method in ('PUT',"POST"):
		return redirect(url_for("light", code=302)
	else:
		light.toggle()
		return "Light Toggled \n" + light.status() +"\n"

if __name__ == '__main__':
    app.debug = True
    app.run(host="0.0.0.0")
